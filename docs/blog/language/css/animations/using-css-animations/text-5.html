<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>使用动画事件</title>
    <style>
      .slidein {
        -moz-animation-duration: 3s;
        -webkit-animation-duration: 3s;
        animation-duration: 3s;
        -moz-animation-name: slidein;
        -webkit-animation-name: slidein;
        animation-name: slidein;
        -moz-animation-iteration-count: 3;
        -webkit-animation-iteration-count: 3;
        animation-iteration-count: 3;
        -moz-animation-direction: alternate;
        -webkit-animation-direction: alternate;
        animation-direction: alternate;
      }

      @-moz-keyframes slidein {
        from {
          margin-left: 100%;
          width: 300%;
        }

        to {
          margin-left: 0%;
          width: 100%;
        }
      }

      @-webkit-keyframes slidein {
        from {
          margin-left: 100%;
          width: 300%;
        }

        to {
          margin-left: 0%;
          width: 100%;
        }
      }

      @keyframes slidein {
        from {
          margin-left: 100%;
          width: 300%;
        }

        to {
          margin-left: 0%;
          width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <h1 id="watchme">Watch me move</h1>
    <p>
      This example shows how to use CSS animations to make
      <code>h1</code> elements move across the page.
    </p>
    <p>
      In addition, we output some text each time an animation event fires, so
      you can see them in action.
    </p>
    <ul id="output"></ul>

    <script>
      function setup() {
        const e = document.getElementById('watchme')
        e.addEventListener('animationstart', listener, false)
        e.addEventListener('animationend', listener, false)
        e.addEventListener('animationiteration', listener, false)
        e.className = 'slidein'
      }

      function listener(e) {
        const l = document.createElement('li')
        switch (e.type) {
          case 'animationstart':
            l.innerHTML = 'Started: elapsed time is ' + e.elapsedTime
            break
          case 'animationend':
            l.innerHTML = 'Ended: elapsed time is ' + e.elapsedTime
            break
          case 'animationiteration':
            l.innerHTML = 'New loop started at time ' + e.elapsedTime
            break
        }
        document.getElementById('output').appendChild(l)
      }

      setup()
    </script>
  </body>
</html>
